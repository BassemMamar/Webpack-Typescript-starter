!function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){e.exports=n(2)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i,o;n(1);(o=i||(i={}))[o.Ready=0]="Ready",o[o.Paused=1]="Paused",o[o.Started=2]="Started",o[o.Passed25=3]="Passed25",o[o.Passed50=4]="Passed50",o[o.Passed75=5]="Passed75";var d={fraction:.5,continuousTime:2,autoplay:!(o[o.Finished=6]="Finished")},u=function(e){if(null==e)return 0;var t=e.offsetLeft;if(0===t)return 0;var n=e.parentElement?e.parentElement.offsetLeft:0;return t!==n?t+u(e.parentElement):t===n?u(e.parentElement):void 0},c=function(e){if(null==e)return 0;var t=e.offsetTop;if(0===t)return 0;var n=e.parentElement?e.parentElement.offsetTop:0;return t!==n?t+c(e.parentElement):t===n?c(e.parentElement):void 0},s=function(){function e(e,t){if(void 0===t&&(t=d),this.videoId=e,this.video=document.getElementById(e),null==this.video)throw new Error("Can't find video element with id "+e+".");this.init(t)}return e.prototype.init=function(e){this.state=i.Ready,this.continuesPlayingTimerReference=null,this.continuousTime=e.continuousTime,this.fraction=e.fraction,this.video.autoplay=e.autoplay,window.addEventListener("scroll",this.adsVisiblityChangingHandler.bind(this)),window.addEventListener("resize",this.adsVisiblityChangingHandler.bind(this))},e.prototype.adsVisiblityChangingHandler=function(){var e=this;if(this.isAdsVideoVisible(this.video,this.fraction)){if(this.state===i.Ready||this.state===i.Paused||this.state===i.Finished)return this.PlayAdsVideo(this.video).then(function(){console.log("Video progress has been started."),e.state=i.Started,e.video.ontimeupdate=e.ontimeupdateEventHandler.bind(e),e.video.onended=e.onendedEventHandler.bind(e),e.continuesPlayingTimeMonator()}).catch(function(e){console.error("YOC- Could't play the ads video due the browser policy. Try to interact with the document first")})}else this.state!==i.Paused&&(this.video.pause(),this.state=i.Paused,this.cancelMonatorTimer());return Promise.resolve()},e.prototype.PlayAdsVideo=function(e){return void 0!==(t=e.play())?t:Promise.resolve();var t},e.prototype.isAdsVideoVisible=function(e,t){return function(e,t){void 0===t&&(t=d.fraction);var n=u(e),i=c(e),o=e.offsetWidth,s=e.offsetHeight,r=n+o,a=i+s;return t<=Math.max(0,Math.min(o,window.pageXOffset+window.innerWidth-n,r-window.pageXOffset))*Math.max(0,Math.min(s,window.pageYOffset+window.innerHeight-i,a-window.pageYOffset))/(o*s)}(e,t)},e.prototype.ontimeupdateEventHandler=function(){if(this.state!==i.Paused){var e=this.video.currentTime/this.video.duration*100;this.checkTimeProgressPercentageChanges(e)}},e.prototype.checkTimeProgressPercentageChanges=function(e){switch(!0){case 75<=e&&e<100&&this.state!==i.Passed75:this.state=i.Passed75,console.log("Video progress has Passed 75%.");break;case 50<=e&&e<75&&this.state!==i.Passed50:this.state=i.Passed50,console.log("Video progress has Passed 50%.");break;case 25<=e&&e<50&&this.state!==i.Passed25:this.state=i.Passed25,console.log("Video progress has Passed 25%.")}},e.prototype.onendedEventHandler=function(){console.log("Video progress has Passed 100%."),this.state=i.Finished},e.prototype.continuesPlayingTimeMonator=function(){var e=this;this.continuesPlayingTimerReference=setTimeout(function(){console.log("The ad is in the viewport of the browser for at least 50% and "+e.continuousTime+" continuous seconds.")},1e3*this.continuousTime)},e.prototype.cancelMonatorTimer=function(){clearTimeout(this.continuesPlayingTimerReference)},e}();window.addEventListener("load",function(){console.log("document has been loaded successfully!");new s("my-ads-video",{fraction:.5,continuousTime:2,autoplay:!1})})}]);
//# sourceMappingURL=library.bundle.js.map